from matcher import Tagger, DBInterface

tag = None

GET_ALL_TAGS_NAMES_CMD = 'SELECT * FROM tags;'

NGRAMS = (1, 2, 3)
WINDOW_WIDTH = 1200

TO_EXCLUDE = {'approach', 'application'}

if __name__ == '__main__':

    urls_tags = {
        'https://medium.com/s/story/spotifys-discover-weekly-how-machine-learning-finds-your-new-music-19a41ab76efe': None,
        'https://blog.openai.com/language-unsupervised/': None}

    db = DBInterface(dbname='postgres', user='postgres')
    tags = db.fetchall(GET_ALL_TAGS_NAMES_CMD)

    tagger = Tagger(tags=tags, to_exclude=TO_EXCLUDE, ngrams=NGRAMS, window_width=WINDOW_WIDTH)

    for url in urls_tags.keys():
        urls_tags[url] = tagger(url=url)

    print(urls_tags)
